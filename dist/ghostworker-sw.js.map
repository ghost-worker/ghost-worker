{"version":3,"file":null,"sources":["../lib/utils.js","../lib/serviceworker/router.js","../lib/serviceworker/index.js"],"sourcesContent":["'use strict';\n\nfunction removeLastBackslash( path ){\n    return (endsWith(path , '/'))? path.slice(0, -1) : path;\n}\n\n\nfunction urlJoinPath( url, path ){\n    url = new URL( url );\n    url.pathname = url.pathname + path\n    return url.toString();\n}\n\n\nfunction urlReplacePath( url, path ){\n    url = new URL( url );\n    url.pathname = path\n    return url.toString();\n}\n\n\nfunction urlRemoveBackslash( url ){\n    url = new URL( url );\n    if(endsWith(url.pathname, '/')){\n      url.pathname = url.pathname.slice(0, -1);\n    }\n    return url.toString();\n}\n\n\nfunction endsWith(str, match, position) {\n  if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > str.length) {\n    position = str.length;\n  }\n  position -= match.length;\n  var lastIndex = str.lastIndexOf(match, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\nfunction clone(obj){\n    // very simple clone, be careful\n    return JSON.parse(JSON.stringify(obj))\n}\n\n\n// handles fetch errs\nfunction handleErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText);\n    }\n    return response;\n}\n\n\nmodule.exports = {\n    removeLastBackslash,\n    urlJoinPath,\n    urlReplacePath,\n    urlRemoveBackslash,\n    endsWith,\n    clone,\n    handleErrors\n};\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.HAPIRouter = factory());\n}(this, (function () { 'use strict';\n\nfunction interopDefault(ex) {\n\treturn ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar hoek = createCommonjsModule(function (module) {\n    'use strict';\n    // basic replacement for HAPI.js Hoek module\n\n\n    module.exports = {\n\n        applyToDefaults: function applyToDefaults(obj, src) {\n            for (var key in src) {\n                if (src.hasOwnProperty(key)) obj[key] = src[key];\n            }\n            return obj;\n        },\n\n        escapeRegex: function escapeRegex(string) {\n\n            // Escape ^$.*+-?=!:|\\/()[]{},\n            return string.replace(/[\\^\\$\\.\\*\\+\\-\\?\\=\\!\\:\\|\\\\\\/\\(\\)\\[\\]\\{\\}\\,]/g, '\\\\$&');\n        },\n\n        assert: function assert(condition, message) {\n            if (!condition) {\n                throw new Error(message);\n            }\n        }\n    };\n});\n\nvar hoek$1 = interopDefault(hoek);\nvar applyToDefaults = hoek.applyToDefaults;\nvar escapeRegex = hoek.escapeRegex;\nvar assert = hoek.assert;\n\nvar require$$0 = Object.freeze({\n    default: hoek$1,\n    applyToDefaults: applyToDefaults,\n    escapeRegex: escapeRegex,\n    assert: assert\n});\n\nvar boom = createCommonjsModule(function (module) {\n    'use strict';\n    // basic replacement for HAPI.js Boom module\n\n\n    module.exports = {\n\n        notFound: function notFound() {\n\n            return null;\n        },\n\n        badRequest: function badRequest() {\n\n            return null;\n        }\n    };\n});\n\nvar boom$1 = interopDefault(boom);\nvar notFound = boom.notFound;\nvar badRequest = boom.badRequest;\n\nvar require$$2 = Object.freeze({\n    default: boom$1,\n    notFound: notFound,\n    badRequest: badRequest\n});\n\nvar regex = createCommonjsModule(function (module, exports) {\n    'use strict';\n\n    // Load modules\n\n\n    // Declare internals\n\n    var internals = {};\n\n    exports.generate = function () {\n\n        /*\n            /path/{param}/path/{param?}\n            /path/{param*2}/path\n            /path/{param*2}\n            /path/x{param}x\n            /{param*}\n        */\n\n        var empty = '(?:^\\\\/$)';\n\n        var legalChars = '[\\\\w\\\\!\\\\$&\\'\\\\(\\\\)\\\\*\\\\+\\\\,;\\\\=\\\\:@\\\\-\\\\.~]';\n        var encoded = '%[A-F0-9]{2}';\n\n        var literalChar = '(?:' + legalChars + '|' + encoded + ')';\n        var literal = literalChar + '+';\n        var literalOptional = literalChar + '*';\n\n        var midParam = '(?:\\\\{\\\\w+(?:\\\\*[1-9]\\\\d*)?\\\\})'; // {p}, {p*2}\n        var endParam = '(?:\\\\/(?:\\\\{\\\\w+(?:(?:\\\\*(?:[1-9]\\\\d*)?)|(?:\\\\?))?\\\\})?)?'; // {p}, {p*2}, {p*}, {p?}\n\n        var partialParam = '(?:\\\\{\\\\w+\\\\??\\\\})'; // {p}, {p?}\n        var mixedParam = '(?:(?:' + literal + partialParam + ')+' + literalOptional + ')|(?:' + partialParam + '(?:' + literal + partialParam + ')+' + literalOptional + ')|(?:' + partialParam + literal + ')';\n\n        var segmentContent = '(?:' + literal + '|' + midParam + '|' + mixedParam + ')';\n        var segment = '\\\\/' + segmentContent;\n        var segments = '(?:' + segment + ')*';\n\n        var path = '(?:^' + segments + endParam + '$)';\n\n        //                1:literal               2:name   3:*  4:count  5:?\n        var parseParam = '(' + literal + ')|(?:\\\\{(\\\\w+)(?:(\\\\*)(\\\\d+)?)?(\\\\?)?\\\\})';\n\n        var expressions = {\n            parseParam: new RegExp(parseParam, 'g'),\n            validatePath: new RegExp(empty + '|' + path),\n            validatePathEncoded: /%(?:2[146-9A-E]|3[\\dABD]|4[\\dA-F]|5[\\dAF]|6[1-9A-F]|7[\\dAE])/g\n        };\n\n        return expressions;\n    };\n});\n\nvar regex$1 = interopDefault(regex);\nvar generate = regex.generate;\n\nvar require$$1 = Object.freeze({\n    default: regex$1,\n    generate: generate\n});\n\nvar segment = createCommonjsModule(function (module, exports) {\n    'use strict';\n\n    // Load modules\n\n    var Hoek = interopDefault(require$$0);\n\n    // Declare internals\n\n    var internals = {};\n\n    exports = module.exports = internals.Segment = function () {\n\n        this._edge = null; // { segment, record }\n        this._fulls = null; // { path: { segment, record }\n        this._literals = null; // { literal: { segment, <node> } }\n        this._param = null; // <node>\n        this._mixed = null; // [{ segment, <node> }]\n        this._wildcard = null; // { segment, record }\n    };\n\n    internals.Segment.prototype.add = function (segments, record) {\n\n        /*\n            { literal: 'x' }        -> x\n            { empty: false }        -> {p}\n            { wildcard: true }      -> {p*}\n            { mixed: /regex/ }      -> a{p}b\n        */\n\n        var current = segments[0];\n        var remaining = segments.slice(1);\n        var isEdge = !remaining.length;\n\n        var literals = [];\n        var isLiteral = true;\n        for (var i = 0; i < segments.length && isLiteral; ++i) {\n            isLiteral = segments[i].literal !== undefined;\n            literals.push(segments[i].literal);\n        }\n\n        if (isLiteral) {\n            this._fulls = this._fulls || {};\n            var literal = '/' + literals.join('/');\n            if (!record.settings.isCaseSensitive) {\n                literal = literal.toLowerCase();\n            }\n\n            Hoek.assert(!this._fulls[literal], 'New route', record.path, 'conflicts with existing', this._fulls[literal] && this._fulls[literal].record.path);\n            this._fulls[literal] = { segment: current, record: record };\n        } else if (current.literal !== undefined) {\n            // Can be empty string\n\n            // Literal\n\n            this._literals = this._literals || {};\n            var currentLiteral = record.settings.isCaseSensitive ? current.literal : current.literal.toLowerCase();\n            this._literals[currentLiteral] = this._literals[currentLiteral] || new internals.Segment();\n            this._literals[currentLiteral].add(remaining, record);\n        } else if (current.wildcard) {\n\n            // Wildcard\n\n            Hoek.assert(!this._wildcard, 'New route', record.path, 'conflicts with existing', this._wildcard && this._wildcard.record.path);\n            Hoek.assert(!this._param || !this._param._wildcard, 'New route', record.path, 'conflicts with existing', this._param && this._param._wildcard && this._param._wildcard.record.path);\n            this._wildcard = { segment: current, record: record };\n        } else if (current.mixed) {\n\n            // Mixed\n\n            this._mixed = this._mixed || [];\n\n            var mixed = this._mixedLookup(current);\n            if (!mixed) {\n                mixed = { segment: current, node: new internals.Segment() };\n                this._mixed.push(mixed);\n                this._mixed.sort(internals.mixed);\n            }\n\n            if (isEdge) {\n                Hoek.assert(!mixed.node._edge, 'New route', record.path, 'conflicts with existing', mixed.node._edge && mixed.node._edge.record.path);\n                mixed.node._edge = { segment: current, record: record };\n            } else {\n                mixed.node.add(remaining, record);\n            }\n        } else {\n\n            // Parameter\n\n            this._param = this._param || new internals.Segment();\n\n            if (isEdge) {\n                Hoek.assert(!this._param._edge, 'New route', record.path, 'conflicts with existing', this._param._edge && this._param._edge.record.path);\n                this._param._edge = { segment: current, record: record };\n            } else {\n                Hoek.assert(!this._wildcard || !remaining[0].wildcard, 'New route', record.path, 'conflicts with existing', this._wildcard && this._wildcard.record.path);\n                this._param.add(remaining, record);\n            }\n        }\n    };\n\n    internals.Segment.prototype._mixedLookup = function (segment) {\n\n        for (var i = 0; i < this._mixed.length; ++i) {\n            if (internals.mixed({ segment: segment }, this._mixed[i]) === 0) {\n                return this._mixed[i];\n            }\n        }\n\n        return null;\n    };\n\n    internals.mixed = function (a, b) {\n\n        var aFirst = -1;\n        var bFirst = 1;\n\n        var as = a.segment;\n        var bs = b.segment;\n\n        if (as.length !== bs.length) {\n            return as.length > bs.length ? aFirst : bFirst;\n        }\n\n        if (as.first !== bs.first) {\n            return as.first ? bFirst : aFirst;\n        }\n\n        for (var i = 0; i < as.segments.length; ++i) {\n            var am = as.segments[i];\n            var bm = bs.segments[i];\n\n            if (am === bm) {\n                continue;\n            }\n\n            if (am.length === bm.length) {\n                return am > bm ? bFirst : aFirst;\n            }\n\n            return am.length < bm.length ? bFirst : aFirst;\n        }\n\n        return 0;\n    };\n\n    internals.Segment.prototype.lookup = function (path, segments, options) {\n\n        var match = null;\n\n        // Literal edge\n\n        if (this._fulls) {\n            match = this._fulls[options.isCaseSensitive ? path : path.toLowerCase()];\n            if (match) {\n                return { record: match.record, array: [] };\n            }\n        }\n\n        // Literal node\n\n        var current = segments[0];\n        var nextPath = path.slice(current.length + 1);\n        var remainder = segments.length > 1 ? segments.slice(1) : null;\n\n        if (this._literals) {\n            var literal = options.isCaseSensitive ? current : current.toLowerCase();\n            match = this._literals.hasOwnProperty(literal) && this._literals[literal];\n            if (match) {\n                var record = internals.deeper(match, nextPath, remainder, [], options);\n                if (record) {\n                    return record;\n                }\n            }\n        }\n\n        // Mixed\n\n        if (this._mixed) {\n            for (var i = 0; i < this._mixed.length; ++i) {\n                match = this._mixed[i];\n                var params = current.match(match.segment.mixed);\n                if (params) {\n                    var array = [];\n                    for (var j = 1; j < params.length; ++j) {\n                        array.push(params[j]);\n                    }\n\n                    var _record = internals.deeper(match.node, nextPath, remainder, array, options);\n                    if (_record) {\n                        return _record;\n                    }\n                }\n            }\n        }\n\n        // Param\n\n        if (this._param) {\n            if (current || this._param._edge && this._param._edge.segment.empty) {\n\n                var _record2 = internals.deeper(this._param, nextPath, remainder, [current], options);\n                if (_record2) {\n                    return _record2;\n                }\n            }\n        }\n\n        // Wildcard\n\n        if (this._wildcard) {\n            return { record: this._wildcard.record, array: [path.slice(1)] };\n        }\n\n        return null;\n    };\n\n    internals.deeper = function (match, path, segments, array, options) {\n\n        if (!segments) {\n            if (match._edge) {\n                return { record: match._edge.record, array: array };\n            }\n\n            if (match._wildcard) {\n                return { record: match._wildcard.record, array: array };\n            }\n        } else {\n            var result = match.lookup(path, segments, options);\n            if (result) {\n                return { record: result.record, array: array.concat(result.array) };\n            }\n        }\n\n        return null;\n    };\n});\n\nvar segment$1 = interopDefault(segment);\n\nvar require$$0$1 = Object.freeze({\n    default: segment$1\n});\n\nvar index = createCommonjsModule(function (module, exports) {\n    'use strict';\n\n    // Load modules\n\n    var Hoek = interopDefault(require$$0);\n    var Boom = interopDefault(require$$2);\n    var Regex = interopDefault(require$$1);\n    var Segment = interopDefault(require$$0$1);\n\n    // Declare internals\n\n    var internals = {\n        pathRegex: Regex.generate(),\n        defaults: {\n            isCaseSensitive: true\n        }\n    };\n\n    exports.Router = internals.Router = function (options) {\n\n        this.settings = Hoek.applyToDefaults(internals.defaults, options || {});\n\n        this.routes = {}; // Key: HTTP method or * for catch-all, value: sorted array of routes\n        this.ids = {}; // Key: route id, value: record\n        this.vhosts = null; // {} where Key: hostname, value: see this.routes\n\n        this.specials = {\n            badRequest: null,\n            notFound: null,\n            options: null\n        };\n    };\n\n    internals.Router.prototype.add = function (config, route) {\n\n        var method = config.method.toLowerCase();\n\n        var vhost = config.vhost || '*';\n        if (vhost !== '*') {\n            this.vhosts = this.vhosts || {};\n            this.vhosts[vhost] = this.vhosts[vhost] || {};\n        }\n\n        var table = vhost === '*' ? this.routes : this.vhosts[vhost];\n        table[method] = table[method] || { routes: [], router: new Segment() };\n\n        var analysis = config.analysis || this.analyze(config.path);\n        var record = {\n            path: config.path,\n            route: route || config.path,\n            segments: analysis.segments,\n            params: analysis.params,\n            fingerprint: analysis.fingerprint,\n            settings: this.settings\n        };\n\n        // Add route\n\n        table[method].router.add(analysis.segments, record);\n        table[method].routes.push(record);\n        table[method].routes.sort(internals.sort);\n\n        var last = record.segments[record.segments.length - 1];\n        if (last.empty) {\n            table[method].router.add(analysis.segments.slice(0, -1), record);\n        }\n\n        if (config.id) {\n            Hoek.assert(!this.ids[config.id], 'Route id', config.id, 'for path', config.path, 'conflicts with existing path', this.ids[config.id] && this.ids[config.id].path);\n            this.ids[config.id] = record;\n        }\n\n        return record;\n    };\n\n    internals.Router.prototype.special = function (type, route) {\n\n        Hoek.assert(Object.keys(this.specials).indexOf(type) !== -1, 'Unknown special route type:', type);\n\n        this.specials[type] = { route: route };\n    };\n\n    internals.Router.prototype.route = function (method, path, hostname) {\n\n        var segments = path.split('/').slice(1);\n\n        var vhost = this.vhosts && hostname && this.vhosts[hostname];\n        var route = vhost && this._lookup(path, segments, vhost, method) || this._lookup(path, segments, this.routes, method) || method === 'head' && vhost && this._lookup(path, segments, vhost, 'get') || method === 'head' && this._lookup(path, segments, this.routes, 'get') || method === 'options' && this.specials.options || vhost && this._lookup(path, segments, vhost, '*') || this._lookup(path, segments, this.routes, '*') || this.specials.notFound || Boom.notFound();\n\n        return route;\n    };\n\n    internals.Router.prototype._lookup = function (path, segments, table, method) {\n\n        var set = table[method];\n        if (!set) {\n            return null;\n        }\n\n        var match = set.router.lookup(path, segments, this.settings);\n        if (!match) {\n            return null;\n        }\n\n        var assignments = {};\n        var array = [];\n        for (var i = 0; i < match.array.length; ++i) {\n            var name = match.record.params[i];\n            var value = match.array[i];\n            if (value) {\n                value = internals.decode(value);\n                if (value.isBoom) {\n                    return this.specials.badRequest || value;\n                }\n\n                if (assignments[name] !== undefined) {\n                    assignments[name] = assignments[name] + '/' + value;\n                } else {\n                    assignments[name] = value;\n                }\n\n                if (i + 1 === match.array.length || name !== match.record.params[i + 1]) {\n\n                    array.push(assignments[name]);\n                }\n            }\n        }\n\n        return { params: assignments, paramsArray: array, route: match.record.route };\n    };\n\n    internals.decode = function (value) {\n\n        try {\n            return decodeURIComponent(value);\n        } catch (err) {\n            return Boom.badRequest('Invalid request path');\n        }\n    };\n\n    internals.Router.prototype.normalize = function (path) {\n\n        if (path && path.indexOf('%') !== -1) {\n\n            // Uppercase %encoded values\n\n            var uppercase = path.replace(/%[0-9a-fA-F][0-9a-fA-F]/g, function (encoded) {\n                return encoded.toUpperCase();\n            });\n\n            // Decode non-reserved path characters: a-z A-Z 0-9 _!$&'()*+,;=:@-.~\n            // ! (%21) $ (%24) & (%26) ' (%27) ( (%28) ) (%29) * (%2A) + (%2B) , (%2C) - (%2D) . (%2E)\n            // 0-9 (%30-39) : (%3A) ; (%3B) = (%3D)\n            // @ (%40) A-Z (%41-5A) _ (%5F) a-z (%61-7A) ~ (%7E)\n\n            var decoded = uppercase.replace(/%(?:2[146-9A-E]|3[\\dABD]|4[\\dA-F]|5[\\dAF]|6[1-9A-F]|7[\\dAE])/g, function (encoded) {\n                return String.fromCharCode(parseInt(encoded.substring(1), 16));\n            });\n\n            path = decoded;\n        }\n\n        return path;\n    };\n\n    internals.Router.prototype.analyze = function (path) {\n\n        Hoek.assert(internals.pathRegex.validatePath.test(path), 'Invalid path:', path);\n        Hoek.assert(!internals.pathRegex.validatePathEncoded.test(path), 'Path cannot contain encoded non-reserved path characters:', path);\n\n        var pathParts = path.split('/');\n        var segments = [];\n        var params = [];\n        var fingers = [];\n\n        for (var i = 1; i < pathParts.length; ++i) {\n            // Skip first empty segment\n            var segment = pathParts[i];\n\n            // Literal\n\n            if (segment.indexOf('{') === -1) {\n                segment = this.settings.isCaseSensitive ? segment : segment.toLowerCase();\n                fingers.push(segment);\n                segments.push({ literal: segment });\n                continue;\n            }\n\n            // Parameter\n\n            var parts = internals.parseParams(segment);\n            if (parts.length === 1) {\n\n                // Simple parameter\n\n                var item = parts[0];\n                Hoek.assert(params.indexOf(item.name) === -1, 'Cannot repeat the same parameter name:', item.name, 'in:', path);\n                params.push(item.name);\n\n                if (item.wilcard) {\n                    if (item.count) {\n                        for (var j = 0; j < item.count; ++j) {\n                            fingers.push('?');\n                            segments.push({});\n                            if (j) {\n                                params.push(item.name);\n                            }\n                        }\n                    } else {\n                        fingers.push('#');\n                        segments.push({ wildcard: true });\n                    }\n                } else {\n                    fingers.push('?');\n                    segments.push({ empty: item.empty });\n                }\n            } else {\n\n                // Mixed parameter\n\n                var seg = {\n                    length: parts.length,\n                    first: typeof parts[0] !== 'string',\n                    segments: []\n                };\n\n                var finger = '';\n                var regex = '^';\n                for (var _j = 0; _j < parts.length; ++_j) {\n                    var part = parts[_j];\n                    if (typeof part === 'string') {\n                        finger = finger + part;\n                        regex = regex + Hoek.escapeRegex(part);\n                        seg.segments.push(part);\n                    } else {\n                        Hoek.assert(params.indexOf(part.name) === -1, 'Cannot repeat the same parameter name:', part.name, 'in:', path);\n                        params.push(part.name);\n\n                        finger = finger + '?';\n                        regex = regex + '(.' + (part.empty ? '*' : '+') + ')';\n                    }\n                }\n\n                seg.mixed = new RegExp(regex + '$', !this.settings.isCaseSensitive ? 'i' : '');\n                fingers.push(finger);\n                segments.push(seg);\n            }\n        }\n\n        return {\n            segments: segments,\n            fingerprint: '/' + fingers.join('/'),\n            params: params\n        };\n    };\n\n    internals.parseParams = function (segment) {\n\n        var parts = [];\n        segment.replace(internals.pathRegex.parseParam, function (match, literal, name, wilcard, count, empty) {\n\n            if (literal) {\n                parts.push(literal);\n            } else {\n                parts.push({\n                    name: name,\n                    wilcard: !!wilcard,\n                    count: count && parseInt(count, 10),\n                    empty: !!empty\n                });\n            }\n\n            return '';\n        });\n\n        return parts;\n    };\n\n    internals.Router.prototype.table = function (host) {\n\n        var result = [];\n        var collect = function collect(table) {\n\n            if (!table) {\n                return;\n            }\n\n            Object.keys(table).forEach(function (method) {\n\n                table[method].routes.forEach(function (record) {\n\n                    result.push(record.route);\n                });\n            });\n        };\n\n        if (this.vhosts) {\n            var vhosts = host ? [].concat(host) : Object.keys(this.vhosts);\n            for (var i = 0; i < vhosts.length; ++i) {\n                collect(this.vhosts[vhosts[i]]);\n            }\n        }\n\n        collect(this.routes);\n\n        return result;\n    };\n\n    internals.sort = function (a, b) {\n\n        var aFirst = -1;\n        var bFirst = 1;\n\n        var as = a.segments;\n        var bs = b.segments;\n\n        if (as.length !== bs.length) {\n            return as.length > bs.length ? bFirst : aFirst;\n        }\n\n        for (var i = 0;; ++i) {\n            if (as[i].literal) {\n                if (bs[i].literal) {\n                    if (as[i].literal === bs[i].literal) {\n                        continue;\n                    }\n\n                    return as[i].literal > bs[i].literal ? bFirst : aFirst;\n                }\n                return aFirst;\n            } else if (bs[i].literal) {\n                return bFirst;\n            }\n\n            return as[i].wildcard ? bFirst : aFirst;\n        }\n    };\n});\n\nvar CallRouter = interopDefault(index);\n\n// pulls in node module and export with rollup\n\nfunction urltoPath(url) {\n\n    if (!url || url.trim() === '') {\n        throw new Error('No url provided');\n    }\n    return new URL(url).pathname;\n}\n\nfunction normalisePath(path, options) {\n\n    checkStructure(path, 'path');\n    var url = new URL('http://example.org' + path);\n    if (endsWith(url.pathname, '/')) {\n        url.pathname = url.pathname.slice(0, -1);\n    }\n    return url.pathname;\n}\n\nfunction normaliseRoute(route) {\n\n    checkStructure(route, 'route');\n    if (endsWith(route, '/')) {\n        route = route.slice(0, -1);\n    }\n    return route;\n}\n\nfunction checkStructure(str, name) {\n\n    if (!str || str.trim() === '') {\n        throw new Error('No ' + name + ' provided');\n    }\n    if (str.indexOf('/') !== 0) {\n        throw new Error('The ' + name + ' does not start with a backslash');\n    }\n}\n\nfunction endsWith(str, match, position) {\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > str.length) {\n        position = str.length;\n    }\n    position -= match.length;\n    var lastIndex = str.lastIndexOf(match, position);\n    return lastIndex !== -1 && lastIndex === position;\n}\n\nCallRouter.urltoPath = urltoPath;\nCallRouter.normaliseRoute = normaliseRoute;\nCallRouter.normalisePath = normalisePath;\n\nreturn CallRouter;\n\n})));\n//# sourceMappingURL=hapi-router.js.map\n","'use strict';\n\nimport Utils from '../utils.js';\nimport HAPIRouter from './router';\n\n\n\nself.addEventListener('message', function (event) {\n    console.log('Handling message event:', event);\n\n    let msgPackage = Utils.clone(event.data);\n    switch (msgPackage.command) {\n        // This command returns a list of the URLs corresponding to the Request objects\n        // that serve as keys for the current cache.\n        case 'getRouteData':\n            if(msgPackage.url){\n                msgPackage.result = getRouteData(msgPackage.url);\n            }else{\n                msgPackage.error = 'No url passed';\n            }\n            break;\n        case 'getSiteData':\n            msgPackage.result = data.site;\n            break;\n        default:\n            // This will be handled by the outer .catch().\n            msgPackage.error = 'Unknown command: ' + msgPackage.command;\n    }\n    event.ports[0].postMessage( Utils.clone(msgPackage) );\n\n    // use event.waitUntil(promise); if you call promise\n});\n\n\n\n// Temp\nlet GhostWorker = {}\nGhostWorker.version = 0.1;\n\n\n\n\nself.addEventListener('fetch', function(event) {\n\n    var requestURL = new URL(Utils.urlRemoveBackslash( event.request.url) );\n    var routeData = getRouteData( requestURL );\n\n    if( Utils.endsWith(requestURL.pathname, '-json') || Utils.endsWith(requestURL.pathname, '-template')){\n\n        event.respondWith(\n          caches.match(event.request)\n            .then(function(response) {\n              if (response) {\n                return response;\n              }\n              // create a response - no cache\n              return response\n            }\n          )\n        );\n\n\n    } else if(routeData && event.request.headers.get('X-Ghost-Worker-Content') !== 'raw'){\n      //console.log('fetch:',event.request.url);\n\n\n\n      // templates\n      var templateRequest = new Request(Utils.urlReplacePath(event.request.url, routeData.templatePath), {});\n      event.respondWith(\n\n        caches.match(templateRequest)\n          .then(function(response) {\n\n            //console.log(getCacheName(response));\n\n            // if found response with template and instructions to add JSON\n            if (response) {\n              return injectCommand(response, 'GhostWorkerDOM.addJSON();');\n            } else {\n\n              // use real request object\n              return fetch(event.request)\n                .then(function (response) {\n                  // with first response add instructions to create template and JSON\n                  return injectCommand(response, 'GhostWorkerDOM.create();');\n                })\n                .catch(function(reason){\n                    console.log('sw fetch fail', reason);\n                })\n            }\n          }\n        )\n      )\n\n\n      }else{\n      // everthing else\n       // console.log('url:', requestURL.pathname, 'method:', event.request.method.toLowerCase());\n        event.respondWith(\n          caches.match(event.request)\n            .then(function(response) {\n              if (response) {\n                //console.log(getCacheName(response));\n                return response;\n              }\n              return fetchAndCache(event.request, {})\n            }\n          )\n        );\n      }\n\n\n  });\n\n\n\nfunction injectCommand( response, command ){\n    var clonedResponse = response.clone();\n\n    if(clonedResponse.status >= 200 && clonedResponse.status < 400){\n        var options = {\n            status:     clonedResponse.status,\n            statusText: clonedResponse.statusText,\n            headers:    {\n                'X-GhostWorker': 'Template',\n                'Content-Type': 'text/html'\n            }\n        };\n        //var myHeaders = new Headers();\n        //myHeaders.append('Content-Type', 'text/xml');\n        //myHeaders.get('Content-Type') // should return 'text/xml'\n\n        // test status before modification\n        return clonedResponse.text().then(function(body){\n            return new Response(body + '<script class=\"ghostworker-script\">' + command + '</script>', options);\n        });\n    }else{\n        return response\n    }\n}\n\n\n\nfunction matchRoute( path ){\n    return (path.indexOf('/code/') === 0);\n}\n\n\n\n// fetch and then cache successful responses\nfunction fetchAndCache(request, options) {\n  options = options || {};\n\n  return fetch(request.clone())\n    .then(function(response) {\n\n        var requestURL = new URL(request.url);\n        //console.log('url:', requestURL.pathname, 'method:', request.method.toLowerCase(), 'status:', response.status);\n\n        // has to a GET with 200 status and not a `raw` request to be caches\n        if (request.method === 'GET' &&\n            response.status > 199 &&\n            response.status < 400 &&\n            request.headers.get('X-Ghost-Worker-Content') !== 'raw') {\n\n        caches.open('ghostworker-' + getCacheName(response) + '-v' + GhostWorker.version).then(function(cache) {\n            cache.put(request, response)\n        });\n        }\n\n        return response.clone();\n    })\n    .catch(function(reason){\n        console.log('sw fetch fail', reason);\n    })\n}\n\n\nfunction getCacheName(response){\n\n   let cacheType = 'other';\n   if(response && response.headers){\n      let contentType = response.headers.get('Content-Type');\n      if(contentType.indexOf(';') > -1){\n        contentType = contentType.split(';')[0].trim();\n      }\n\n\n      if(contentType && contentType.indexOf('/') > -1){\n        const parts = contentType.split('/')\n          switch (parts[0]) {\n            case 'image':\n              cacheType = 'image'\n              break\n            case 'audio':\n              cacheType = 'audio'\n              break\n            case 'video':\n              cacheType = 'video'\n              break\n            case 'application':\n              cacheType = 'application'\n              break\n            case 'text':\n              cacheType = 'text'\n              break\n          }\n\n          let contentMimeTypes = {\n            html: ['text/html', 'application/xhtml+xml'],\n            css: ['text/css'],\n            js: ['application/javascript', 'text/javascript', 'application/json'],\n            font: ['application/vnd.ms-fontobject', 'application/font-woff', 'application/font-woff2', 'application/x-font-truetype', 'application/x-font-opentype']\n          }\n\n          if (cacheType === 'application' || cacheType === 'text') {\n              for (var name in contentMimeTypes) {\n                  if (contentMimeTypes.hasOwnProperty(name)) {\n                      contentMimeTypes[name].forEach(function (mimeType) {\n                          if (mimeType === contentType) {\n                              cacheType = name;\n                          }\n                      });\n                  }\n              }\n          }\n      }\n   }\n\n   return cacheType;\n}\n\n\n\nfunction getRouteData( url ){\n    //if(sendMessage){\n    //    sendMessage(JSON.stringify({ 'command': 'getRouteData', 'url': url }));\n    //}\n\n    let targetUrl = new URL( url );\n    let targetRoute = router.route('get', targetUrl.pathname);\n\n    if(targetRoute){\n        // use key to get array of matches from routeMap\n        var matchingRoutes = routeMap[targetRoute.route];\n\n        if(matchingRoutes.length > 1){\n            var out = null;\n            matchingRoutes.forEach( function(route) {\n                if(route.matchFunction && route.matchFunction(targetUrl.pathname, targetRoute)){\n                    out = route;\n                }\n            })\n            return out;\n        }\n        if(matchingRoutes.length === 1){\n            return matchingRoutes[0];\n        }\n    }\n    return null;\n}\n\n\n\n\n\n\n\nvar data = {\n    site: {},\n    routes: []\n}\n\n\nconst router = new HAPIRouter.Router();\nlet routeKey = 1;\nlet routeMap = {}\n\nGhostWorker.site = function( options ){\n    if(options.template){\n        data.site = options.template;\n        if(data.site.elements.indexOf('title') === -1){\n            data.site.elements.unshift('title');\n        }\n    }\n}\n\nGhostWorker.section = function( options ){\n\n    if(options.template){\n        var route = options.template;\n\n        if(!route.templatePath && route.name){\n            route.templatePath = '/-' + slugify(route.name) + '-template';\n        }\n\n        if(!Array.isArray(route.match)){\n            route.match = [route.match];\n        }\n        // check title is always included\n        route.elements = route.elements || [];\n\n        // auto add title element\n        if(route.elements.indexOf('title') === -1){\n            route.elements.unshift('title');\n        }\n\n        route.match.forEach( function(match) {\n            var match = Utils.removeLastBackslash( match );\n            if(!router.route('get', match)){\n                // add route with key so we can match more than one object\n                router.add({ method: 'get', path: match }, routeKey);\n                routeMap[routeKey] = [route];\n                routeKey ++;\n            }else{\n                routeMap[router.route('get', match).route].push( route );\n            }\n        });\n\n\n    }\n\n};\n\n\n\nfunction slugify(str) {\n    str = str.replace(/^\\s+|\\s+$/g, ''); // trim\n    str = str.toLowerCase();\n\n    // remove accents, swap ñ for n, etc\n    var from = \"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\";\n    var to = \"aaaaaeeeeeiiiiooooouuuunc------\";\n    for (var i = 0, l = from.length; i < l; i++) {\n        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n    }\n\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\n        .replace(/\\s+/g, '-') // collapse whitespace and replace by -\n        .replace(/-+/g, '-'); // collapse dashes\n\n    return str;\n};\n\n\nexport default GhostWorker\n\n\n"],"names":["removeLastBackslash","path","endsWith","slice","urlJoinPath","url","URL","pathname","toString","urlReplacePath","urlRemoveBackslash","str","match","position","isFinite","Math","floor","length","lastIndex","lastIndexOf","clone","obj","JSON","parse","stringify","handleErrors","response","ok","Error","statusText","exports","global","factory","module","define","amd","HAPIRouter","this","interopDefault","ex","createCommonjsModule","fn","hoek","applyToDefaults","src","key","hasOwnProperty","escapeRegex","string","replace","assert","condition","message","hoek$1","require$$0","Object","freeze","boom","notFound","badRequest","boom$1","require$$2","regex","internals","generate","empty","legalChars","encoded","literalChar","literal","literalOptional","midParam","endParam","partialParam","mixedParam","segmentContent","segment","segments","parseParam","expressions","RegExp","regex$1","require$$1","Hoek","Segment","_edge","_fulls","_literals","_param","_mixed","_wildcard","prototype","add","record","current","remaining","isEdge","literals","isLiteral","i","undefined","push","join","settings","isCaseSensitive","toLowerCase","currentLiteral","wildcard","mixed","_mixedLookup","node","sort","a","b","aFirst","bFirst","as","bs","first","am","bm","lookup","options","array","nextPath","remainder","deeper","params","j","_record","_record2","result","concat","segment$1","require$$0$1","index","Boom","Regex","Router","defaults","routes","ids","vhosts","specials","config","route","method","vhost","table","router","analysis","analyze","fingerprint","last","id","special","type","keys","indexOf","hostname","split","_lookup","set","assignments","name","value","decode","isBoom","paramsArray","decodeURIComponent","err","normalize","uppercase","toUpperCase","decoded","String","fromCharCode","parseInt","substring","pathRegex","validatePath","test","validatePathEncoded","pathParts","fingers","parts","parseParams","item","wilcard","count","seg","finger","_j","part","host","collect","forEach","CallRouter","urltoPath","trim","normalisePath","normaliseRoute","checkStructure","self","addEventListener","event","log","msgPackage","Utils","data","command","getRouteData","error","site","ports","postMessage","GhostWorker","version","requestURL","request","routeData","respondWith","caches","then","headers","get","templateRequest","Request","templatePath","injectCommand","fetch","catch","reason","fetchAndCache","clonedResponse","status","text","body","Response","open","getCacheName","cache","put","cacheType","contentType","contentMimeTypes","mimeType","targetUrl","targetRoute","matchingRoutes","routeMap","out","matchFunction","routeKey","template","elements","unshift","section","slugify","Array","isArray","from","to","l","charAt"],"mappings":"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"}